<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>HDF5 Extras: File Format</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">HDF5 Extras
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   <div id="projectbrief">Convenience Functions for using HDF5 Better</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">File Format </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This is a brief overview of the hdf5-extras library object implementation in an HDF5 file. There are basically 3 different objects that HDF5 defines: metadata, groups, and datasets. Groups are basically like directories in a filesystem, with names and metadata attached to them. Datasets are basically like files in a filesystem, with names and metadata attached to them. We use these 3 HDF5 objects to create our own "meta" objects.</p>
<h1><a class="anchor" id="file_format_file_metadata"></a>
File Metadata</h1>
<p><a name="%46ile%20%4detadata%20%46ormat"></a></p>
<p>There is an "HDF5 Group," named <code>_Header</code> which contains "file" metadata: </p><ul>
<li>grouptype, Value: "Metadata" </li>
<li>filetype, Value: "GEOSCI" </li>
<li>software_version, Value: "V0.0.1" </li>
<li>descriptor </li>
<li>creation_datetime </li>
<li>last_update_datetime </li>
<li>history </li>
<li>writeable</li>
</ul>
<p>The descriptor is set by the user. The history is added-on to during the lifetime of the file. It keeps track of everything that is done to the file. datetime's look like: "15:50:36 12-Apr-2014" and help keep track of things. Each history line-item is tagged with a datetime.</p>
<p>Other objects are created as "HDF5 Groups" under "/," (the root) with metadata and data beneath the group.</p>
<h1><a class="anchor" id="file_format_image_objects"></a>
Image Objects</h1>
<p><a name="%49mage%20%4fbject%20%46ile%20%46ormat"></a></p>
<p>Image objects are created as groups. They have the following metadata attached to them:</p>
<ul>
<li>grouptype, Value: "Image" </li>
<li>descriptor </li>
<li>creation_datetime </li>
<li>last_update_datetime </li>
<li>history </li>
<li>writeable</li>
</ul>
<p>The idea behind a multi-channel image is that it should hold all the channels that the user would like to group together as a single unit. For polarimetric SAR data, all the channels of the covariance matrix should be kept together in one image, to be operated on together. For multispectral data, like Landsat, all 7 channels need to be kept together, even though the resolution, and hence number of pixels, is different for some of the channels.</p>
<p>The descriptor is set by the user. The history is added-on to during the lifetime of the image. It keeps track of everything that is done to the image. datetime's look like: "15:50:36 12-Apr-2014" and help keep track of things. Each history line-item is tagged with a datetime.</p>
<p>Other, optional, metadata includes the header information that came with the original data, called the "rawheader". This is just a HDF5 dataset that contains an exact copy of the metadata that was provided with the original data.</p>
<p>Another optional metadata item is the "processed" header data. This is in a format that depends on the kind of data, such as sar, or landsat, or lidar. Each of these kinds of data has a specific XML-based metadata format that contains the generic metadata for that type. This metadata is a key component of any system that needs to be able to apply processing algorithms to data without needing to know which sensor took the data. Without this, all the processing codes would be specialized for speciifc sensors and there would never be any consistency and there would be far too many algorithms to keep track of easily. This data is stored in an IFile so that it is easy to adapt other codes to work with them, as if they are a file in the filesystem.</p>
<h2><a class="anchor" id="file_format_image_data"></a>
Image Data or Rasters</h2>
<p><a name="%49mage%20%44ata%20%46ile%20%46ormat"></a></p>
<p>Each channel in an image is a separate "HDF5 Dataset" within an image group. These are called "rasters."</p>
<p>YET:<br />
Images can also have image pyramid data associated with them. These are also "HDF5 Datasets," and are named "p%d_%dX%d" where the first <code>d</code> is the channel number they are associated with, the secondc d is the x-dimension in pixels, and the 3rd <code>d</code> is the y-dimension in pixels. As the pyramids are meant solely for speeding up the GUI, they are not mentioned in the metadata, and the code has to "look for" them.</p>
<p>Each raster dataset also has metadata:</p>
<ul>
<li>dataset_type, </li>
<li>descriptor </li>
<li>last_update_datetime </li>
<li>type </li>
<li>pixel_size_units, Typical Value: "meter" </li>
<li>pixel_size_x </li>
<li>pixel_size_y </li>
<li>npixels </li>
<li>nlines </li>
<li>writeable</li>
</ul>
<p>optional metadata: </p><ul>
<li>location </li>
<li>spatialref </li>
<li>bounds</li>
</ul>
<p>The typical value for dataset_type is "9" which means a raster dataset.</p>
<p>The type is a string that indicates the numeric data-type for the raster data, it can be one of: <code>"UINT1"</code>, <code>"UINT8"</code>, <code>"INT8"</code>, <code>"CINT8"</code>, <code>"UINT16"</code>, <code>"INT16"</code>, <code>"CINT16"</code>, <code>"UINT32"</code>, <code>"INT32"</code>, <code>"UINT64"</code>, <code>"INT64"</code>, <code>"CINT32"</code>, <code>"CINT64"</code>, <code>"R32"</code>, <code>"R64"</code>, <code>"C64"</code>, <code>"C128"</code>.</p>
<p>This covers all the basic types that are possible: integers, reals, complex numbers, with sizes of 1 bit, 1 byte, 2 byte, 4 bytes, or 8 bytes. These strings can be decoded by noting that U stands for Unsigned, C stands for Complex, R stands for Real, INT stands for Integer, and the number at the end is the number of bits in the value. For example:</p>
<ul>
<li><code>"UINT32"</code> is an unsigned 32-bit integer </li>
<li><code>"CINT64"</code> is a complex 64-bit integer. It's real-part is represented with a 32-integer, it's imaginary-part represented with a 32-bit integer. </li>
<li><code>"C128"</code> is a complex 128-bit floating-point value. It's real part: 64-bit real number (double), it's imag part: 64-bit real number (double). </li>
<li><code>"UINT1"</code> is an unsigned 1-bit integer (a bitmap).</li>
</ul>
<p>The "pixel-size" parameters are given in the <code>x</code> and <code>y</code> directions, and they have units. These can all be updated as needed.</p>
<p>"npixels" is the count of pixels in the x-direction, "nlines" is the count of pixels in the y-direction.</p>
<p>The metadata "writeable" is string, containing a 0 if the raster is write-locked, and a 1 if the raster is writeable.</p>
<p>YET:<br />
The metadata "location" is straightforward copy of the <code>Location_t</code> structure, with either an affine transform to the projected coords: (x0,y0), (dx,dy), etc., or a list of GCPs giving image coords and projected coords for up to 100 points. This is all stored in a simple dataset YET: in XML format.</p>
<p>YET:<br />
The metadata "spatialref" is a string containing the EPSG (or other) code, the WKT string, and the proj.4 string.</p>
<h2><a class="anchor" id="file_format_iamge_pyramids"></a>
Image Pyramids</h2>
<p><a name="%49mage%20%50yramids%20%46ile%20%46ormat"></a></p>
<p>YET</p>
<p>Image objects can contain other datasets besides the rasters. In particular, they can contain "image pyramids" named <code>"p%d_xsizeXysize"</code> where the first <code>d</code> is the channel number they correspond to, and the xsizeXysize is the shrunken size of each: there may be many. These datasets (as well as the rasters) have <code>last-update-datetime's</code> so that a program can decide to recompute the pyramids <em>if</em> they are older than the image rasters they go with. These datasets do not have "writeable" metadata so they are always read/write.</p>
<h1><a class="anchor" id="file_format_vectors"></a>
Vectors</h1>
<p><a name="%56ector%20%4fbject%20%46ile%20%46ormat"></a></p>
<p>YET Vector objects are also created as groups. They have the following metadata attached to them:</p>
<ul>
<li>grouptype, Value: "Vector" </li>
<li>descriptor </li>
<li>creation_datetime </li>
<li>last_update_datetime </li>
<li>history </li>
<li>writeable </li>
<li>spatialref </li>
<li>bounds</li>
</ul>
<p>YET:Convert to XML The "spatialref" metadata string contains 3 popular ways to specify the spatial reference that is used to specify coordinates: First there is the EPSG code, then the Well-Known-Text version, and lastly the proj4 method, each separated with semi-colons. An example:</p>
<div class="fragment"><div class="line">EPSG:32613; wkt:PROJCS[<span class="stringliteral">&quot;WGS_1984_UTM_Zone_13N&quot;</span>,</div>
<div class="line">GEOGCS[<span class="stringliteral">&quot;GCS_WGS_1984&quot;</span>,DATUM[<span class="stringliteral">&quot;D_WGS_1984&quot;</span>,</div>
<div class="line">SPHEROID[<span class="stringliteral">&quot;WGS_1984&quot;</span>,6378137.0,298.257223563]],</div>
<div class="line">PRIMEM[<span class="stringliteral">&quot;Greenwich&quot;</span>,0.0],UNIT[<span class="stringliteral">&quot;Degree&quot;</span>,0.0174532925199433],</div>
<div class="line">AUTHORITY[<span class="stringliteral">&quot;EPSG&quot;</span>,<span class="stringliteral">&quot;4326&quot;</span>]],PROJECTION[<span class="stringliteral">&quot;Transverse_Mercator&quot;</span>],</div>
<div class="line">PARAMETER[<span class="stringliteral">&quot;False_Easting&quot;</span>,500000.0],PARAMETER[<span class="stringliteral">&quot;False_Northing&quot;</span>,0.0],</div>
<div class="line">PARAMETER[<span class="stringliteral">&quot;Central_Meridian&quot;</span>,-105.0],PARAMETER[<span class="stringliteral">&quot;Scale_Factor&quot;</span>,0.9996],</div>
<div class="line">PARAMETER[<span class="stringliteral">&quot;Latitude_Of_Origin&quot;</span>,0.0],UNIT[<span class="stringliteral">&quot;Meter&quot;</span>,1.0],</div>
<div class="line">AUTHORITY[<span class="stringliteral">&quot;EPSG&quot;</span>,<span class="stringliteral">&quot;32613&quot;</span>]]; </div>
<div class="line">proj4:+proj=utm +zone=13 +ellps=WGS84 +units=m +no_defs;</div>
</div><!-- fragment --><p>Note that in the actual string there are no "line-feeds" as there are here.</p>
<p>The data that is stored in the Vector object is in an "HDF5 Dataset" under the named Group. This dataset is always named "ifile1." However, this dataset is set up as a 1-dimensional extendable dataset that is basically equivalent to a "file." It is called an <a class="el" href="structIFILE.html">IFILE</a>, and contains all the database tables needed to represent the vectors in a relational-spatial database. The database used is spatialite (www.gaia-gis.it/fossil/libspatialite), which is implemented on top of sqlite3 (www.sqlite.org). A driver was written in order to make it use the internal file instead of the usual file on a user's hard drive. This is described in chapter vfs_library}.</p>
<h1><a class="anchor" id="file_format_yet"></a>
Yet to Implement</h1>
<p><a name="%59et%20to%20%49mplement%20%46ile%20%46ormat%20%46eatures"></a></p>
<p>LUTs, PCTS, GCPs,</p>
<p>bayesian classn signatures</p>
<p>random forests data</p>
<p>modality-specific header info.</p>
<p>2d, 3d meshes</p>
<p>2d, 3d triangulations</p>
<p>2d, 3d objects</p>
<p>and we can use the sqlite3 to make a standard relational database, instead of the spatialite database we have already created for vectors. This can be used for std spreadsheets, etc....</p>
<p>lots of arbitrary data formats for various computer codes can be re-created as <a class="el" href="structIFILE.html">IFILE</a>'s with minor modifications to the original codes (as I've implemented all the C file operations for <a class="el" href="structIFILE.html">IFILE</a>'s).</p>
<p>is it possible to include ESMF in this?</p>
<p>Need forward and inverse models of all kinds.</p>
<p>calibration</p>
<p>etc. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Aug 16 2016 18:04:14 for HDF5 Extras by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
